<template name="artifact">
  {{> toc}}

  {{#if hasToc}}
    <div class="thirteen wide column">
      <h1><a href="{{pathFor route='artifact.edit' _projectId=projectId}}"><i class="icon edit"></i></a>{{name}} <div class="ui {{#if hasReferences}}{{else}}active{{/if}} mini inline loader"></div></h1>
      <div class="ui divider"></div>

      <div id="artifactDiv" class="ui fluid basic segment" style="padding:0px;">
        {{> infobox}}
        {{#each references}}
          {{{this}}}
        {{/each}}
      </div>
    </div>
  {{else}}
    <div class="sixteen wide column">
      <h1><a href="{{pathFor route='artifact.edit' _projectId=projectId}}"><i class="icon edit"></i></a>{{name}} <div class="ui {{#if hasReferences}}{{else}}active{{/if}} mini inline loader"></div></h1>
      <div class="ui divider"></div>

      <div id="artifactDiv" class="ui fluid basic segment" style="padding:0px;">
        {{> infobox}}
        {{#each references}}
          {{{this}}}
        {{/each}}
      </div>
    </div>
  {{/if}}
  {{> inlineAddArtifact}}
</template>

<template name="editArtifact">
  <div class="sixteen wide column">
    {{#autoForm collection="Artifacts" doc=this id="editArtifactForm" type="update"}}
      {{> afQuickField name='name'}}
      {{> afQuickField name='tokens'}}
      {{> afQuickField name='image'}}
      <button type="submit" class="ui blue button">Update</button>
      {{> quickRemoveButton collection="Artifacts" _id=this._id class="ui red button" beforeRemove=beforeRemove}}
    {{/autoForm}}
  </div>
</template>

<template name="addArtifact">
  <div class="sixteen wide column">
    {{#autoForm collection="Artifacts" id="addArtifactForm" doc=defaultValues type="insert"}}
      {{> afQuickField name='name'}}
      {{> afQuickField name='tokens'}}
      {{> afQuickField name='image'}}
      <button id="addArtifactButton" type="submit" class="ui green button">Add</button>
    {{/autoForm}}
  </div>
</template>
