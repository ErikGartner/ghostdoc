<template name="editGem">
  <div class="ten wide column">
  {{#autoForm collection="Gems" doc=this id="editGemForm" type="update"}}
    {{> afQuickField name='name'}}
    {{> gemHelp}}
    {{> afQuickField name='patterns'}}
    <button type="submit" class="ui blue button">Update</button>
    {{> quickRemoveButton collection="Gems" _id=this._id class="ui red button" beforeRemove=beforeRemove}}
  {{/autoForm}}
  </div>
</template>

<template name="addGem">
  <div class="ten wide column">
  {{#autoForm collection="Gems" id="addGemForm" type="insert"}}
    {{> afQuickField name='name'}}
    {{> gemHelp}}
    {{> afQuickField name='patterns'}}
    <button type="submit" class="ui green button">Insert</button>
  {{/autoForm}}
  </div>
</template>

<template name="gemHelp">
  <div class="ui message">
    <div class="header">
      Gem Pattern Format
    </div>
    <ul class="list">
      <li>Gems patterns are built upon Python regex</li>
      <li><span class="cmd_pattern">~GH_THIS_ARTIFACT~</span> matches the Artifact</li>
      <li><span class="cmd_pattern">~GH_OTHER_ARTIFACT~</span> matches any other Artifact</li>
    </ul>
  </div>
</template>

<template name="viewGem">
  <div class="ten wide column">
    <h1><a href="{{pathFor route='gem.edit' _projectId=projectId}}"><i class="icon edit"></i></a>{{name}} {{#if filterValue}}- {{filterValue}}{{/if}}</h1>
    <div class="ui items">
    {{#each artifacts}}
        <div class="item">
          <div>
            {{#if artifact.image}}
            <a href={{pathFor 'artifact.view' _id=artifact._id _projectId=artifact.project}}>
              <img class="ui tiny image" src="{{artifact.image}}">
            </a>
            {{/if}}
          </div>
          <div class="content">
            <a class="header" href={{pathFor 'artifact.view' _id=artifact._id _projectId=artifact.project}}>{{artifact.name}}</a>
            <div class="description">
              <ul>
                {{#each gems}}{{#each result}}
                  <li>{{this}}</li>
                {{/each}}{{/each}}
              </ul>
            </div>
          </div>
        </div>
    {{/each}}
    </div>
  </div>
</template>
