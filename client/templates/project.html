<template name="project">
  <div class="ten wide column">
    <h1><a href="{{pathFor route='project.edit' _projectId=_id}}"><i class="icon edit"></i></a>{{name}} <small>by {{authorName}}</small></h1>

    <div class="ui stackable one column grid">
      <div class="row">
        <div class="column">
          {{#markdown}}{{description}}{{/markdown}}
        </div>
      </div>

      <div class="row">
        <div class="column">
          <h3>Collaborators</h3>
          <ul>
          {{#each collaborators}}
            <li>{{this}}</li>
          {{/each}}
          </ul>
        </div>
      </div>
    </div>

    <div class="ui stackable three column grid">

      <div class="row">
        <div class="column">
          <h3>Sources</h3>
          <div class="ui list">
            <a class="link item" href="{{pathFor 'source.add' _projectId=_id}}">
              <i class="plus icon"></i>
              New Source
            </a>
            {{#each sources}}
            <a class="link item" href="{{pathFor 'source.view' _id=_id _projectId=project}}">
              <i class="file icon"></i>
              {{name}}
            </a>
            {{/each}}
          </div>
        </div>
        <div class="column">
          <h3>Artifacts</h3>
          <div class="ui list">
            <a class="link item" href="{{pathFor 'artifact.add' _projectId=_id}}">
              <i class="plus icon"></i>
              New Artifact
            </a>
            {{#each artifacts}}
            <a class="link item" href="{{pathFor 'artifact.view' _id=_id _projectId=project}}">
              <i class="tag icon"></i>
              {{name}}
            </a>
            {{/each}}
          </div>
        </div>

        <div class="column">
          <h3>Gems</h3>
          <div class="ui list">
            <a class="link item" href="{{pathFor 'gem.add' _projectId=_id}}">
              <i class="plus icon"></i>
              New Gem
            </a>
            {{#each gems}}
            <a class="link item" href="{{pathFor 'gem.view' _id=_id _projectId=project}}">
              <i class="diamond icon"></i>
              {{name}}
            </a>
            {{/each}}
          </div>
        </div>
      </div>
    </div>
  </div>
</template>

<template name="addProject">
  <div class="ten wide column">
    {{#autoForm collection="Projects" id="addProjectForm" type="insert"}}
      {{> afQuickField name='name'}}
      {{> afQuickField name='description' rows=5}}
      {{> afQuickField name='collaborators'}}
      {{> afQuickField name='trello_user_key'}}
      {{> afQuickField name='trello_org_id'}}
      <button type="submit" class="ui green button">Insert</button>
    {{/autoForm}}
  </div>
</template>

<template name="editProject">
  <div class="ten wide column">
    {{#autoForm collection="Projects" doc=this id="editProjectForm" type="update"}}
      {{> afQuickField name='name'}}
      {{> afQuickField name='description' rows=5}}
      {{> afQuickField name='collaborators'}}
      {{> afQuickField name='trello_user_key'}}
      {{> afQuickField name='trello_org_id'}}
      <button type="submit" class="ui blue button">Update</button>
      {{> quickRemoveButton collection="Projects" _id=this._id class="ui red button"}}
    {{/autoForm}}
  </div>
</template>
